<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bob Barker Company</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .controls {
            padding: 25px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .stats {
            padding: 20px 30px;
            background: #e7f3ff;
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            border-bottom: 2px solid #e9ecef;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #6c757d;
        }

        .content {
            padding: 30px;
        }

        .category {
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .category:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102,126,234,0.1);
        }

        .category-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: all 0.3s;
        }

        .category-header:hover {
            background: linear-gradient(135deg, #5568d3 0%, #653a8b 100%);
        }

        .category-title {
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-count {
            background: rgba(255,255,255,0.3);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
        }

        .toggle-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }

        .category-header.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }

        .category-content {
            max-height: 5000px;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }

        .category-content.collapsed {
            max-height: 0;
        }

        .type-section {
            border-top: 1px solid #e9ecef;
            background: #f8f9fa;
        }

        .type-header {
            padding: 15px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: background 0.3s;
        }

        .type-header:hover {
            background: #e9ecef;
        }

        .type-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .type-count {
            background: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            color: #667eea;
            border: 1px solid #667eea;
        }

        .type-content {
            max-height: 3000px;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
        }

        .type-content.collapsed {
            max-height: 0;
        }

        .requirements-list {
            background: white;
        }

        .requirement-item {
            padding: 20px 25px;
            border-bottom: 1px solid #e9ecef;
            transition: background 0.3s;
        }

        .requirement-item:last-child {
            border-bottom: none;
        }

        .requirement-item:hover {
            background: #f8f9fa;
        }

        .requirement-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 12px;
            gap: 15px;
        }

        .requirement-id {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #667eea;
            background: #e7f3ff;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        .requirement-title {
            flex: 1;
            font-size: 1.05em;
            font-weight: 600;
            color: #212529;
            line-height: 1.5;
        }

        .requirement-details {
            color: #6c757d;
            line-height: 1.7;
            padding-left: 15px;
            border-left: 3px solid #e9ecef;
            margin-top: 10px;
        }

        .requirement-status-selector {
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .requirement-status-selector label {
            font-size: 0.9em;
            color: #6c757d;
            font-weight: 600;
        }

        .requirement-status-selector select {
            padding: 6px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 0.9em;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }

        .requirement-status-selector select:focus {
            outline: none;
            border-color: #667eea;
        }

        .requirement-status-selector select.status-accurate {
            border-color: #00b894;
            background: #f0fff4;
            color: #00b894;
        }

        .requirement-status-selector select.status-not-applicable {
            border-color: #d63031;
            background: #fff0f0;
            color: #d63031;
        }

        .requirement-status-selector select.status-needs-revision {
            border-color: #fdcb6e;
            background: #fffbf0;
            color: #e17055;
        }

        .requirement-comment {
            margin-top: 10px;
        }

        .requirement-comment label {
            display: block;
            font-size: 0.9em;
            color: #6c757d;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .requirement-comment textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 0.9em;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            resize: vertical;
            min-height: 60px;
            transition: all 0.3s;
        }

        .requirement-comment textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .requirement-comment textarea::placeholder {
            color: #adb5bd;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #00b894;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            font-weight: 600;
        }

        .notification.error {
            background: #d63031;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.4;
            }
        }

        .blink-red {
            animation: blink 1.5s ease-in-out infinite;
            color: #1e3a8a !important;
            font-weight: 700 !important;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .no-results i {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .expand-collapse-all {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102,126,234,0.3);
        }


        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: 100%;
            }

            .requirement-header {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“‹ Bob Barker Company</h1>
            <p>Requirements Validation & Review Form</p>
        </div>

        <div style="background: #e0f2fe; padding: 20px 30px; border-bottom: 2px solid #1e3a8a;">
            <details>
                <summary class="blink-red" style="cursor: pointer; font-weight: 600; font-size: 1.1em; user-select: none;">
                    ðŸ“– Instructions - Click to expand
                </summary>
                <div style="margin-top: 15px; line-height: 1.8; color: #495057;">
                    <p><strong>How to use this form:</strong></p>
                    <ol style="margin: 10px 0; padding-left: 25px;">
                        <li><strong>Review each requirement</strong> - Expand categories to view all requirements</li>
                        <li><strong>Select a status</strong> for each requirement:
                            <ul style="margin: 5px 0 10px 20px;">
                                <li><span style="color: #00b894;">âœ“ Accurate</span> - Requirement is correct as written</li>
                                <li><span style="color: #d63031;">âœ— Not Applicable - remove</span> - Requirement is not applicable and should be removed</li>
                                <li><span style="color: #e17055;">âš  Needs Revision</span> - Requirement needs clarification or modification</li>
                            </ul>
                        </li>
                        <li><strong>Add comments</strong> - Provide specific feedback, clarifications, or corrections in the comment field</li>
                        <li><strong>Once finished</strong> - Click the <strong>"Export Selections"</strong> button to download your responses as a CSV file</li>
                        <li><strong>Email the CSV file</strong> to your Five9 Project Manager/Project Engineer for review</li>
                    </ol>
                    <p><strong>Note:</strong> Your selections are saved automatically in your browser. You can close and return to this page later to continue your review.</p>
                </div>
            </details>
        </div>

        <div class="controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ðŸ” Search requirements...">
            </div>
            <div class="expand-collapse-all">
                <button class="btn" onclick="expandAll()">Expand All</button>
                <button class="btn" onclick="collapseAll()">Collapse All</button>
                <button class="btn" onclick="exportStatuses()">Export Selections</button>
                <button class="btn" onclick="clearAllSelections()" style="background: #d63031; color: white; border-color: #d63031;">Clear All</button>
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalReqs">0</div>
                <div class="stat-label">Total Requirements</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="visibleReqs">0</div>
                <div class="stat-label">Visible</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="categoryCount">0</div>
                <div class="stat-label">Categories</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="accurateCount" style="color: #00b894;">0</div>
                <div class="stat-label">Accurate</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="notApplicableCount" style="color: #d63031;">0</div>
                <div class="stat-label">Not Applicable</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="revisionCount" style="color: #fdcb6e;">0</div>
                <div class="stat-label">Needs Revision</div>
            </div>
        </div>

        <div class="content" id="content">
            <!-- Content will be dynamically generated -->
        </div>
    </div>

    <script>
        const requirementsData = {
            "System Configuration": {
                        "Configuration": [
                                    {
                                                "id": "REQ-001",
                                                "requirement": "Time Zone Configuration",
                                                "details": "Configure all system operations, schedules, hours of operation, and time-based routing decisions to use Eastern Time (ET) as the primary timezone reference"
                                    }
                        ]
            },
            "Inbound Lines & Hours": {
                        "Configuration": [
                                    {
                                                "id": "REQ-002",
                                                "requirement": "Finance Line Hours of Operation",
                                                "details": "Monday - Friday, 8:00 AM - 5:00 PM Eastern Time. All times outside this window (before 8 AM, after 5 PM, weekends) are considered after-hours"
                                    },
                                    {
                                                "id": "REQ-003",
                                                "requirement": "Customer Service Line Hours of Operation",
                                                "details": "Monday - Friday, 8:00 AM - 7:00 PM Eastern Time (extends 2 hours beyond Finance). All times outside this window are considered after-hours"
                                    },
                                    {
                                                "id": "REQ-004",
                                                "requirement": "Customer Service Line Catch-All Function",
                                                "details": "Customer Service line serves as catch-all for all unused 800 numbers and legacy queue numbers. All legacy/discontinued customer-facing numbers must route to Customer Service line"
                                    }
                        ]
            },
            "IVR & Call Flow": {
                        "Call Routing": [
                                    {
                                                "id": "REQ-005",
                                                "requirement": "Finance Line Call Flow Sequence",
                                                "details": "Sequential call flow: Step 1: Emergency Broadcast check \u2192 Step 2: Holiday check \u2192 Step 3: Temporary closure check \u2192 Step 4: Hours of operation check \u2192 Step 5: Finance queue routing. Each step follows specific logic defined in subsequent requirements"
                                    },
                                    {
                                                "id": "REQ-006",
                                                "requirement": "Finance Line Emergency Broadcast Behavior",
                                                "details": "If emergency broadcast ACTIVE: Play emergency message, then continue to holiday check. If INACTIVE: Skip to holiday check. Emergency broadcast does NOT terminate calls, only adds informational message"
                                    },
                                    {
                                                "id": "REQ-007",
                                                "requirement": "Finance Line Holiday Routing",
                                                "details": "If current date matches configured holiday: Play holiday greeting \u2192 Route to Finance voicemail \u2192 END. If NOT holiday: Continue to temporary closure check"
                                    },
                                    {
                                                "id": "REQ-008",
                                                "requirement": "Finance Line Temporary Closure Routing",
                                                "details": "If temporary closure active for current date/time: Play temporary closure message \u2192 Route to Finance voicemail \u2192 END. If no temporary closure: Continue to hours check"
                                    },
                                    {
                                                "id": "REQ-009",
                                                "requirement": "Finance Line Hours Check Routing",
                                                "details": "If WITHIN business hours (8 AM - 5 PM ET Mon-Fri): Route to Finance queue. If OUTSIDE business hours: Play after-hours message \u2192 Route to Finance voicemail \u2192 END"
                                    },
                                    {
                                                "id": "REQ-010",
                                                "requirement": "Customer Service Line Call Flow Sequence",
                                                "details": "Sequential call flow: Step 1: Emergency Broadcast check \u2192 Step 2: Holiday check \u2192 Step 3: Temporary closure check \u2192 Step 4: Hours check \u2192 Step 5: IVR menu presentation (3 options) \u2192 Step 6: Route based on selection"
                                    },
                                    {
                                                "id": "REQ-011",
                                                "requirement": "Customer Service Line Emergency Broadcast Behavior",
                                                "details": "If emergency broadcast ACTIVE: Play emergency message, then continue to holiday check. If INACTIVE: Skip to holiday check. Emergency broadcast does NOT terminate calls"
                                    },
                                    {
                                                "id": "REQ-012",
                                                "requirement": "Customer Service Line Holiday Routing",
                                                "details": "If current date matches configured holiday: Play holiday greeting \u2192 Route to Customer Service voicemail \u2192 END. If NOT holiday: Continue to temporary closure check"
                                    },
                                    {
                                                "id": "REQ-013",
                                                "requirement": "Customer Service Line Temporary Closure Routing",
                                                "details": "If temporary closure active for current date/time: Play temporary closure message \u2192 Route to Customer Service voicemail \u2192 END. If no temporary closure: Continue to hours check"
                                    },
                                    {
                                                "id": "REQ-014",
                                                "requirement": "Customer Service Line Hours Check",
                                                "details": "If WITHIN business hours (8 AM - 7 PM ET Mon-Fri): Continue to IVR menu. If OUTSIDE business hours: Play after-hours message \u2192 Route to Customer Service voicemail \u2192 END"
                                    }
                        ],
                        "IVR Menu": [
                                    {
                                                "id": "REQ-015",
                                                "requirement": "Customer Service IVR Menu Options",
                                                "details": "Present 3-option menu: Press 1 = Transfer to Finance Queue | Press 2 = Customer Service - Place Order Queue | Press 3 = Customer Service - Questions Queue. Menu must include clear prompts for each option"
                                    },
                                    {
                                                "id": "REQ-016",
                                                "requirement": "IVR Menu Error Handling - Retry Logic",
                                                "details": "Maximum 3 retry attempts with 10-second intervals. After invalid entry or timeout: Attempt 1 - Play invalid selection message | Attempt 2 - Replay menu with invalid message | Attempt 3 - Replay menu with invalid message | After 3rd failure: Route to Customer Service Questions queue (default). Industry standard error handling"
                                    },
                                    {
                                                "id": "REQ-017",
                                                "requirement": "IVR Menu Routing - Press 1 Finance",
                                                "details": "When caller presses 1: Transfer call to Finance Queue. Apply Finance queue configuration (hold music, announcements, agent routing)"
                                    },
                                    {
                                                "id": "REQ-018",
                                                "requirement": "IVR Menu Routing - Press 2 Place Order",
                                                "details": "When caller presses 2: Route to Customer Service - Place Order Queue. Apply Place Order queue configuration with all CS agents assigned"
                                    },
                                    {
                                                "id": "REQ-019",
                                                "requirement": "IVR Menu Routing - Press 3 Questions",
                                                "details": "When caller presses 3: Route to Customer Service - Questions Queue. Apply Questions queue configuration with experienced agents only"
                                    }
                        ]
            },
            "Emergency Broadcast": {
                        "Feature": [
                                    {
                                                "id": "REQ-020",
                                                "requirement": "Emergency Broadcast Internal Access Number",
                                                "details": "Create internal access phone number (not published to customers) for administrators to activate/deactivate emergency broadcasts. Only authorized administrators can access"
                                    },
                                    {
                                                "id": "REQ-021",
                                                "requirement": "Emergency Broadcast Activation Interface",
                                                "details": "IVR menu on internal access number with options to: Activate emergency broadcast | Deactivate emergency broadcast | Record/update emergency message (optional if using text-to-speech)"
                                    },
                                    {
                                                "id": "REQ-022",
                                                "requirement": "Emergency Broadcast Active Behavior",
                                                "details": "When ACTIVE: Play pre-recorded emergency message immediately when call enters system (Finance or Customer Service line) \u2192 Then continue through normal call flow (holiday \u2192 temporary closure \u2192 hours \u2192 queue routing). Broadcast does NOT terminate calls or route to voicemail"
                                    },
                                    {
                                                "id": "REQ-023",
                                                "requirement": "Emergency Broadcast Inactive Behavior",
                                                "details": "When INACTIVE: Skip emergency broadcast step entirely. Call proceeds directly to Holiday check with no indication to caller that feature exists"
                                    },
                                    {
                                                "id": "REQ-024",
                                                "requirement": "Emergency Broadcast Message Management",
                                                "details": "Primary method: Five9 text-to-speech for rapid updates. Administrators can update message text in Five9 without re-recording. Alternative: Upload pre-recorded professional audio if customer prefers. Messages apply to ALL lines when active"
                                    }
                        ],
                        "Documentation": [
                                    {
                                                "id": "REQ-025",
                                                "requirement": "Emergency Broadcast Administrator Training",
                                                "details": "Provide training and documentation to designated administrators (Michelle, Nicole, others TBD) on activation/deactivation procedures. Document use cases: weather disruptions, emergency closures, system outages"
                                    }
                        ]
            },
            "Holiday Configuration": {
                        "Schedule": [
                                    {
                                                "id": "REQ-026",
                                                "requirement": "Holiday Schedule Configuration",
                                                "details": "Configure custom holiday schedule based on customer-provided list. Customer does NOT observe all federal holidays. Confirmed holidays include: New Year's Day, MLK Day, Good Friday, Memorial Day. Complete list to be provided by Michelle"
                                    }
                        ],
                        "Call Flow": [
                                    {
                                                "id": "REQ-027",
                                                "requirement": "Holiday Call Flow - Finance Line",
                                                "details": "When holiday detected on Finance line: Play holiday greeting message \u2192 Route immediately to Finance Voicemail queue \u2192 END. Do NOT present IVR menu or queue options. Do NOT route to agents"
                                    },
                                    {
                                                "id": "REQ-028",
                                                "requirement": "Holiday Call Flow - Customer Service Line",
                                                "details": "When holiday detected on Customer Service line: Play holiday greeting message \u2192 Route immediately to Customer Service Voicemail queue \u2192 END. Do NOT present IVR menu or queue options. Do NOT route to agents"
                                    }
                        ],
                        "Voicemail": [
                                    {
                                                "id": "REQ-029",
                                                "requirement": "Holiday Voicemail Processing",
                                                "details": "Voicemails left on holidays become available to agents on next business day. Agents retrieve via 'Ready - All' status selection. High-priority voicemails processed first on return day"
                                    }
                        ]
            },
            "Temporary Closure": {
                        "Feature": [
                                    {
                                                "id": "REQ-030",
                                                "requirement": "Temporary Closure Scheduling",
                                                "details": "Support date AND time-specific closures (e.g., 'February 15, 2026, 11:30 AM - 12:00 PM'). Support line-specific closures: All lines simultaneously OR Finance only OR Customer Service only. Support recurring closures (e.g., 'Every other Wednesday at 11:30 AM')"
                                    },
                                    {
                                                "id": "REQ-031",
                                                "requirement": "Temporary Closure Use Cases",
                                                "details": "Company meetings (twice monthly, Wednesdays 11:30 AM - 12:00 PM ET, all lines closed) | Departmental events (e.g., Customer Service Week, CS queue only closed 1-2 hours) | Ad-hoc closures (emergency meetings, facility issues, variable duration 30 min - 3 hours)"
                                    },
                                    {
                                                "id": "REQ-032",
                                                "requirement": "Temporary Closure Message Customization",
                                                "details": "Use Five9 text-to-speech for rapid updates. Administrator can modify message text without technical support. Support immediate updates (e.g., meeting runs late, extend closure time). Messages include: reason for closure, expected reopening time, alternative contact methods"
                                    },
                                    {
                                                "id": "REQ-034",
                                                "requirement": "Temporary Closure Activation Controls",
                                                "details": "Scheduled activation: System automatically activates at configured start time | Scheduled deactivation: System automatically deactivates at end time | Manual override: Admin can deactivate early if event ends sooner | Manual activation: Admin can activate immediately for unplanned closures"
                                    }
                        ],
                        "Call Flow": [
                                    {
                                                "id": "REQ-033",
                                                "requirement": "Temporary Closure Active Call Flow",
                                                "details": "When active temporary closure detected: Play temporary closure message \u2192 Route immediately to appropriate voicemail queue \u2192 END. Do NOT present IVR menu. Do NOT route to agents"
                                    }
                        ],
                        "Documentation": [
                                    {
                                                "id": "REQ-035",
                                                "requirement": "Temporary Closure Administrator Interface",
                                                "details": "Provide simple web-based interface in Five9 Admin Application for designated administrators (Michelle, Nicole). Training provided during UAT on creating, modifying, and deleting temporary closure schedules"
                                    }
                        ]
            },
            "After-Hours Schedule": {
                        "Call Flow": [
                                    {
                                                "id": "REQ-036",
                                                "requirement": "Finance Line After-Hours Definition",
                                                "details": "After-hours = Monday-Friday before 8:00 AM or after 5:00 PM ET, All day Saturday, All day Sunday"
                                    },
                                    {
                                                "id": "REQ-037",
                                                "requirement": "Customer Service Line After-Hours Definition",
                                                "details": "After-hours = Monday-Friday before 8:00 AM or after 7:00 PM ET, All day Saturday, All day Sunday"
                                    },
                                    {
                                                "id": "REQ-038",
                                                "requirement": "After-Hours Routing Behavior",
                                                "details": "When after-hours detected: Play after-hours/night message \u2192 Route immediately to appropriate voicemail (Finance calls \u2192 Finance Voicemail | CS calls \u2192 CS Voicemail). Do NOT present IVR menu. Do NOT queue calls. Do NOT route to agents"
                                    }
                        ],
                        "Prompts": [
                                    {
                                                "id": "REQ-039",
                                                "requirement": "After-Hours Message Requirements",
                                                "details": "Line-specific messages stating: offices closed, business hours (5 PM for Finance / 7 PM for Customer Service), voicemail instructions, alternative contact methods (website URL, email address). Sample: 'Our offices are currently closed. Business hours are Monday-Friday, 8 AM to [5/7 PM] ET. Please leave detailed message with name, phone, reason for calling'"
                                    }
                        ],
                        "Voicemail": [
                                    {
                                                "id": "REQ-040",
                                                "requirement": "After-Hours Voicemail Processing",
                                                "details": "Voicemails left after hours become available to agents on next business day. Agents retrieve via 'Ready - All' status. Processing priority per customer's internal policies"
                                    }
                        ]
            },
            "Queue Configuration": {
                        "Settings": [
                                    {
                                                "id": "REQ-041",
                                                "requirement": "Maximum Queue Time Setting",
                                                "details": "Recommended: 5 minutes (shorter than 10-minute default for better customer experience). After timeout: Route to appropriate voicemail queue. Customer expressed openness to Five9 best practice recommendations"
                                    },
                                    {
                                                "id": "REQ-042",
                                                "requirement": "Queue When No Agents Logged In",
                                                "details": "Setting: YES - Allow queueing even when zero agents logged in. Behavior: If no agents in Available or Not Ready status, route immediately to voicemail. Prevents customers holding indefinitely with no possibility of agent connection"
                                    },
                                    {
                                                "id": "REQ-043",
                                                "requirement": "Queue When All Agents Not Ready",
                                                "details": "Setting: YES - Allow queueing when agents logged in but all in Not Ready status. Behavior: Hold customer in queue as agents may become ready momentarily. Alternative option: Route to voicemail immediately (requires customer decision during configuration)"
                                    }
                        ]
            },
            "Hold Experience": {
                        "Configuration": [
                                    {
                                                "id": "REQ-044",
                                                "requirement": "Hold Music and Announcement Intervals",
                                                "details": "First announcement at 18 seconds after entering queue (position in queue/general message). Subsequent announcements every 30 seconds. Between announcements: Play music on hold continuously. Music must loop seamlessly without dead air"
                                    },
                                    {
                                                "id": "REQ-045",
                                                "requirement": "Hold Announcement Content Options",
                                                "details": "First announcement: Position in queue, disclaimer, or general greeting | Subsequent announcements: High call volume apology, Estimated wait time (if available), Alternative contact methods (website, email), Press 1 for voicemail option"
                                    },
                                    {
                                                "id": "REQ-047",
                                                "requirement": "Music on Hold File",
                                                "details": "Customer will provide custom music on hold file (or use Five9 default). File must be in proper format for Five9 system. Apply to all queues: Finance, CS Place Order, CS Questions"
                                    }
                        ],
                        "Feature": [
                                    {
                                                "id": "REQ-046",
                                                "requirement": "Voicemail Option During Hold",
                                                "details": "Frequency: Offer voicemail option every 30 seconds during hold announcements. Action: Press 1 to leave voicemail \u2192 Immediately route to appropriate voicemail queue (Finance or Customer Service based on originating line). If no response: Continue hold cycle, offer again in next 30-second interval. Persist until agent answers, timeout, or disconnect"
                                    }
                        ]
            },
            "Skills-Based Routing": {
                        "Queue Design": [
                                    {
                                                "id": "REQ-048",
                                                "requirement": "Finance Queue Configuration",
                                                "details": "Single Finance queue for all Finance line calls. All Finance agents assigned to this queue. Apply general queue parameters (5 min max queue time, announcements, hold music, voicemail option). Timeout destination: Finance Voicemail. Press 1 during hold: Finance Voicemail"
                                    },
                                    {
                                                "id": "REQ-049",
                                                "requirement": "Customer Service Place Order Queue Configuration",
                                                "details": "Call characteristics: Customers who know exactly what to order, straightforward transactions, lower complexity. Agent assignment: ALL Customer Service agents (including new hires and experienced). Apply queue parameters with 5 min timeout. Agent desktop displays 'CS Place Order'"
                                    },
                                    {
                                                "id": "REQ-050",
                                                "requirement": "Customer Service Questions Queue Configuration",
                                                "details": "Call characteristics: Order status inquiries, complex product questions, troubleshooting, higher complexity requiring expertise. Agent assignment: SUBSET of CS agents - only experienced/tenured staff with proven expertise. Apply queue parameters with 5 min timeout. Agent desktop displays 'CS Questions'"
                                    }
                        ],
                        "Configuration": [
                                    {
                                                "id": "REQ-051",
                                                "requirement": "Deprecate Regional Routing Logic",
                                                "details": "DO NOT IMPLEMENT area code-based routing. Previous system used regional queues (North, South, Central, West) based on area code mapping. This functionality has been removed and simplified. All CS agents now handle calls from all geographic regions"
                                    }
                        ],
                        "Assignment": [
                                    {
                                                "id": "REQ-052",
                                                "requirement": "Agent Queue Assignment",
                                                "details": "Customer to provide list of which CS agents are assigned to Place Order queue (all agents) vs Questions queue (experienced agents only). Finance agents assigned to Finance queue. Agents may be assigned to multiple queues as appropriate"
                                    }
                        ]
            },
            "Voicemail Configuration": {
                        "Queue Setup": [
                                    {
                                                "id": "REQ-053",
                                                "requirement": "Voicemail Queue Structure",
                                                "details": "Create two voicemail queues: Finance Voicemail Queue (receives Finance line voicemails, accessed by Finance agents only) | Customer Service Voicemail Queue (receives CS line voicemails, accessed by CS agents only)"
                                    }
                        ],
                        "Prompts": [
                                    {
                                                "id": "REQ-054",
                                                "requirement": "Finance Voicemail Greeting",
                                                "details": "Professional greeting prompting caller to leave message. Sample: 'You have reached the Finance department at [Company]. Please leave your name, phone number, account number if available, and a detailed message. We will return your call within one business day.' Customer provides script; temporary text-to-speech used initially"
                                    },
                                    {
                                                "id": "REQ-055",
                                                "requirement": "Customer Service Voicemail Greeting",
                                                "details": "Professional greeting prompting caller to leave message. Sample: 'You have reached Customer Service at [Company]. Please leave your name, phone number, order number if available, and a detailed message. We will return your call within one business day.' Customer provides script; temporary text-to-speech used initially"
                                    }
                        ],
                        "Agent Access": [
                                    {
                                                "id": "REQ-056",
                                                "requirement": "Voicemail Access Method",
                                                "details": "Agents select 'Ready - All' status in Five9 agent desktop to receive voicemail messages. Voicemails delivered one at a time similar to live calls. Agent clicks to play voicemail recording through headset/speakers"
                                    }
                        ],
                        "Processing": [
                                    {
                                                "id": "REQ-057",
                                                "requirement": "Voicemail Playback and Processing",
                                                "details": "Agent listens to voicemail \u2192 Processes request (lookup customer, return call, process order without callback, escalate to appropriate department) \u2192 Agent dispositioning required (same as live calls) \u2192 Voicemail interaction logged in Five9 reporting"
                                    }
                        ],
                        "Tracking": [
                                    {
                                                "id": "REQ-058",
                                                "requirement": "Voicemail Callback Tracking",
                                                "details": "Customer needs visibility into which voicemails have been returned vs pending. Implementation options: Disposition codes ('Voicemail - Returned Call' vs 'Voicemail - Left Message') | Custom fields in NetSuite activity record | Five9 reporting filters. Decision to be finalized during training/configuration phase"
                                    }
                        ],
                        "Settings": [
                                    {
                                                "id": "REQ-059",
                                                "requirement": "Voicemail Recording Length and Capacity",
                                                "details": "Maximum recording length: 2-3 minutes (configurable, industry standard). Behavior after max length: Automatically end recording, save message, thank caller. Queue capacity: No practical limit, all voicemails accepted and queued. No overflow handling needed - voicemail always available as final destination"
                                    }
                        ]
            },
            "Agent Desktop": {
                        "Display": [
                                    {
                                                "id": "REQ-060",
                                                "requirement": "Finance Line Call Source Identification",
                                                "details": "Display label: 'Finance' (or equivalent clear identifier). Location: Visible in Five9 agent desktop call information panel. Timing: Must appear when call is alerting (before answer) or immediately upon connection. Purpose: Agent knows this is Finance line, prepares appropriate greeting"
                                    },
                                    {
                                                "id": "REQ-061",
                                                "requirement": "Customer Service Place Order Call Identification",
                                                "details": "Display label: 'CS Place Order' (or equivalent clear identifier). Location: Visible in agent desktop call information panel. Timing: Display when call alerting or immediately upon connection. Purpose: Agent knows customer wants to place order, prepares appropriate greeting"
                                    },
                                    {
                                                "id": "REQ-062",
                                                "requirement": "Customer Service Questions Call Identification",
                                                "details": "Display label: 'CS Questions' (or equivalent clear identifier). Location: Visible in agent desktop call information panel. Timing: Display when call alerting or immediately upon connection. Purpose: Agent knows customer has inquiry/issue, prepares for more complex interaction"
                                    },
                                    {
                                                "id": "REQ-063",
                                                "requirement": "Transferred Call Identification",
                                                "details": "For calls transferred from Customer Service IVR to Finance (Press 1): Display 'Finance' as primary label. Additional info (if possible): Indication that call originated from CS IVR transfer. Purpose: Finance agent understands customer already navigated menu"
                                    },
                                    {
                                                "id": "REQ-064",
                                                "requirement": "ANI Display Format",
                                                "details": "Display caller's phone number (Automatic Number Identification) prominently in agent desktop. Format: Standard US phone format (###) ###-####. Timing: Display immediately when call alerts"
                                    },
                                    {
                                                "id": "REQ-065",
                                                "requirement": "Standard Call Information Panel",
                                                "details": "Display: Caller phone number (ANI), Queue/Skill name (Finance, CS Place Order, CS Questions), Wait time (how long caller has been holding), Call type (inbound, outbound, internal), Date/time of call, Campaign/DNIS information (which phone number caller dialed)"
                                    },
                                    {
                                                "id": "REQ-066",
                                                "requirement": "NetSuite-Enhanced Information Display",
                                                "details": "Additional information if available: Caller name (if matched from NetSuite), Account/customer number (if matched), Previous interaction history (if available), VIP status or priority indicators (if customer uses this)"
                                    }
                        ]
            },
            "NetSuite Integration": {
                        "Installation": [
                                    {
                                                "id": "REQ-067",
                                                "requirement": "NetSuite Package Installation - Sandbox",
                                                "details": "Install Five9 NetSuite SuiteApp package in customer's NetSuite Sandbox environment first. Package includes pre-built scripts, workflows, custom fields, and adapter interface. Sandbox must be refreshed copy of Production (not outdated). Five9 team has sandbox access credentials (confirmed)"
                                    },
                                    {
                                                "id": "REQ-068",
                                                "requirement": "NetSuite Package Installation - Production",
                                                "details": "After sandbox testing complete and customer approval: Install package in Production NetSuite environment. Customer provides Production credentials separately (security). Production testing before go-live. Rollback plan documented"
                                    }
                        ],
                        "Configuration": [
                                    {
                                                "id": "REQ-069",
                                                "requirement": "NetSuite Custom Fields Creation",
                                                "details": "Package creates custom fields in Phone Call record: Five9 Agent Name, Five9 Call Duration, Five9 After Call Work Time, Five9 Disposition, Five9 Queue/Skill, Five9 Transcript (for AI transcript), Five9 Summary (for AI summary). Provide screenshot documentation of all fields. Customer reviews for conflicts with existing customizations"
                                    }
                        ],
                        "Feature": [
                                    {
                                                "id": "REQ-070",
                                                "requirement": "Phone Call Activity Logging",
                                                "details": "Every inbound and outbound call automatically creates Phone Call activity record in NetSuite. Call records created in real-time as call connects to agent. Records include: Title/Subject (auto-generated), Phone number (ANI), Date/Time, Assigned To (agent), Status (Completed after call ends), Related Customer/Contact (linked if phone matched)"
                                    },
                                    {
                                                "id": "REQ-071",
                                                "requirement": "Custom Five9 Fields Population",
                                                "details": "Automatically populate custom fields: Agent Name (full name), Call Duration (total talk time in min/sec), After Call Work Time (wrap-up/disposition time), Disposition (disposition code selected), Queue/Skill (Finance, CS Place Order, CS Questions), Campaign (phone number/line customer called)"
                                    },
                                    {
                                                "id": "REQ-072",
                                                "requirement": "Phone Call Record Linking",
                                                "details": "If phone number matches Customer record: Phone Call linked to Customer | If phone matches Contact record: Phone Call linked to Contact | If agent manually selects different record during call: Phone Call linked to agent-selected record | Link visible in 'Related Records' section under 'Five9 Tasks' subtab"
                                    },
                                    {
                                                "id": "REQ-073",
                                                "requirement": "ANI Lookup and Screen Pop - Single Match",
                                                "details": "When inbound call arrives: Five9 adapter performs real-time lookup in NetSuite. Searches Customer records AND Contact records for phone number match. If exactly ONE match found (one Customer OR one Contact): NetSuite automatically opens matched record in browser tab. Agent immediately sees customer/contact details, no manual search required"
                                    },
                                    {
                                                "id": "REQ-074",
                                                "requirement": "ANI Lookup and Screen Pop - Multiple Matches",
                                                "details": "If phone number matches multiple Customer records, multiple Contact records, or combination: NetSuite does NOT automatically open any record. Five9 adapter displays list of matching records as clickable hyperlinks with customer/contact names. Agent clicks appropriate record from list. Selected record opens in NetSuite browser tab"
                                    },
                                    {
                                                "id": "REQ-075",
                                                "requirement": "ANI Lookup and Screen Pop - No Match",
                                                "details": "If phone number not found in NetSuite: No screen pop occurs. Agent manually searches for customer by name, email, or other identifier. Agent creates new Customer/Contact record if first-time caller"
                                    },
                                    {
                                                "id": "REQ-076",
                                                "requirement": "ANI Lookup and Screen Pop - Mixed Match",
                                                "details": "If phone number matches one Customer record AND one Contact record: Treated as multiple matches. Adapter displays both options as clickable hyperlinks. Agent selects appropriate record based on context. Selected record opens in NetSuite"
                                    },
                                    {
                                                "id": "REQ-077",
                                                "requirement": "Click-to-Dial Functionality",
                                                "details": "All phone number fields in NetSuite Customer and Contact records become clickable. Clicking phone number initiates outbound call through Five9. Agent must be logged into Five9 agent desktop. Call placed through agent's configured phone (soft phone or physical phone). Outbound call automatically logged as Phone Call activity in NetSuite and linked to Customer/Contact from which click originated"
                                    },
                                    {
                                                "id": "REQ-078",
                                                "requirement": "Multi-Number Click-to-Dial Handling",
                                                "details": "If Customer/Contact has multiple phone numbers (office, mobile, home): Each number becomes individually clickable. Phone Call record notes which specific number was dialed"
                                    }
                        ],
                        "Interface": [
                                    {
                                                "id": "REQ-079",
                                                "requirement": "Five9 Adapter Browser Extension",
                                                "details": "Browser extension installed in Google Chrome or Microsoft Edge. Appears as sidebar panel on left side of NetSuite interface. Always visible when NetSuite is open (can be collapsed if needed)"
                                    },
                                    {
                                                "id": "REQ-080",
                                                "requirement": "Adapter Display During Call",
                                                "details": "Display: Agent status (Ready, Not Ready, etc.), Active call information (caller number, wait time, queue), Call controls (hold, transfer, conference, hang up), Disposition drop-down menu, Wrap-up/After Call Work timer, Customer/Contact matching information (if multiple matches found)"
                                    },
                                    {
                                                "id": "REQ-081",
                                                "requirement": "Adapter Display Between Calls",
                                                "details": "Display: Agent status controls, Call history (recent calls handled), Statistics (calls handled today, average handle time, etc.), Quick access to change status or request supervisor assistance"
                                    },
                                    {
                                                "id": "REQ-082",
                                                "requirement": "Multiple Match Hyperlinks Display",
                                                "details": "When phone number matches multiple NetSuite records: Adapter displays list of all matches as hyperlinked customer/contact names. Agent clicks appropriate name. NetSuite opens selected record in browser tab. Subsequent call log links to selected record"
                                    }
                        ]
            },
            "Recording Prompts": {
                        "Content": [
                                    {
                                                "id": "REQ-083",
                                                "requirement": "Holiday Messages",
                                                "details": "Option 1 - Universal holiday greeting (single message for all holidays): 'Our offices are closed today in observance of a company holiday. Please leave a message and we will return your call on our next business day.' OR Option 2 - Holiday-specific greetings (unique message per holiday): New Year's Day message, MLK Day message, Good Friday message, Memorial Day message, [Additional holidays per customer list]. Customer to specify preferred approach"
                                    },
                                    {
                                                "id": "REQ-084",
                                                "requirement": "Finance Greeting",
                                                "details": "Plays immediately when call enters Finance queue. Example: 'Thank you for calling the Finance department at [Company]. Your call is important to us. Please remain on the line and the next available representative will assist you.' Customer provides final script"
                                    },
                                    {
                                                "id": "REQ-085",
                                                "requirement": "Customer Service Greeting/Menu",
                                                "details": "Plays at IVR menu presentation. Example: 'Thank you for calling [Company] Customer Service. For Finance and billing questions, press 1. To place an order, press 2. For order status or other questions, press 3.' Customer provides final script"
                                    },
                                    {
                                                "id": "REQ-086",
                                                "requirement": "Finance After-Hours Message",
                                                "details": "Line-specific message. Example: 'Thank you for calling the Finance department at [Company]. Our offices are currently closed. Our business hours are Monday through Friday, 8:00 AM to 5:00 PM Eastern Time. Please leave a message and we will return your call on our next business day.' Customer provides final script"
                                    },
                                    {
                                                "id": "REQ-087",
                                                "requirement": "Customer Service After-Hours Message",
                                                "details": "Line-specific message. Example: 'Thank you for calling [Company] Customer Service. Our offices are currently closed. Our business hours are Monday through Friday, 8:00 AM to 7:00 PM Eastern Time. Please leave a message and we will return your call on our next business day. You may also place orders on our website at [URL].' Customer provides final script"
                                    },
                                    {
                                                "id": "REQ-088",
                                                "requirement": "Hold Announcements",
                                                "details": "First hold announcement (18 sec): 'All of our representatives are currently assisting other customers. Your call will be answered in the order it was received. Please remain on the line.' | High call volume announcement: 'We are experiencing higher than usual call volume. Your call is important to us. Press 1 at any time to leave a voicemail message and we will return your call as soon as possible.' | Optional estimated wait time announcement (if wait time engine enabled)"
                                    },
                                    {
                                                "id": "REQ-089",
                                                "requirement": "Temporary Closure Messages",
                                                "details": "Company meeting template: 'Thank you for calling [Company]. We are currently closed for a company meeting from 11:30 AM to 12:00 PM Eastern Time. Please leave a message and we will return your call after our meeting.' | Generic template: 'Thank you for calling [Company]. We are temporarily closed. We will reopen at approximately [TIME]. Please leave a message or try your call again later.' Customer provides specific wording"
                                    },
                                    {
                                                "id": "REQ-090",
                                                "requirement": "Emergency Broadcast Messages",
                                                "details": "Customer will provide specific wording based on emergency type (weather, outage, etc.). Example: 'Thank you for calling [Company]. We are currently experiencing severe weather conditions in our area. You may experience delays in service. For immediate assistance, please visit our website at [URL] or email us at [address]. Please remain on the line to speak with an agent.'"
                                    },
                                    {
                                                "id": "REQ-091",
                                                "requirement": "Error Handling Messages",
                                                "details": "Invalid menu selection: 'I'm sorry, that is not a valid selection. Please try again.' | Menu timeout: 'I'm sorry, I didn't receive your selection. Please listen carefully to the following options.'"
                                    }
                        ]
            },
            "MS Teams Integration": {
                        "Integration": [
                                    {
                                                "id": "REQ-092",
                                                "requirement": "MS Teams Directory Integration via Azure/Entra",
                                                "details": "Connect Five9 to Azure/Entra environment to access Microsoft Teams directory for call transfers. Integration will tap into Microsoft Graph API to retrieve user names, phone numbers, and availability/presence status."
                                    }
                        ],
                        "Configuration": [
                                    {
                                                "id": "REQ-093",
                                                "requirement": "PSTN Transfer Configuration",
                                                "details": "Configure PSTN (Public Switched Telephone Network) line transfers from Five9 agents to Microsoft Teams users. Transfers will use PSTN lines to individual Teams phone numbers rather than direct SIP connections to Teams environment."
                                    },
                                    {
                                                "id": "REQ-096",
                                                "requirement": "Teams Phone Number Directory Access",
                                                "details": "Enable Five9 agents to access directory of customer service and finance team members with assigned Teams phone numbers. Directory filtering capability to show relevant groups/departments for transfers."
                                    }
                        ],
                        "Technical": [
                                    {
                                                "id": "REQ-094",
                                                "requirement": "Azure App Registration for Five9",
                                                "details": "Kelly Moon to register Five9 package in Azure/Entra environment similar to existing IceBar app registration. Five9 will provide instructions for app registration process to enable directory access."
                                    }
                        ],
                        "Feature": [
                                    {
                                                "id": "REQ-095",
                                                "requirement": "Teams User Presence/Availability Display",
                                                "details": "Display color-coded availability status for Teams users in Five9 agent interface. Green indicates user is available to accept calls, red indicates busy/unavailable/in meeting. Helps agents determine if transfer recipient is ready to accept calls."
                                    }
                        ],
                        "Call Flow": [
                                    {
                                                "id": "REQ-097",
                                                "requirement": "External Transfer Workflow",
                                                "details": "Configure transfer workflow for Five9 agents to transfer calls to non-Five9 users (e.g., finance department). Agent-to-agent transfers within Five9 will continue to function normally within the Five9 platform."
                                    }
                        ]
            }
};

        let currentFilters = {
            search: ''
        };

        function initializePage() {
            renderContent();
            collapseAll(); // Start with all categories collapsed
            setupEventListeners();
            updateStats();
            loadSavedStatuses();
        }

        function updateRequirementStatus(reqId, status) {
            const selectElement = document.getElementById(`status-${reqId}`);
            
            // Remove all status classes
            selectElement.classList.remove('status-accurate', 'status-not-applicable', 'status-needs-revision');
            
            // Add appropriate class based on selection
            if (status) {
                selectElement.classList.add(`status-${status}`);
            }
            
            // Save to localStorage
            saveRequirementStatus(reqId, status);
            updateStatusCounts();
        }

        function saveRequirementStatus(reqId, status) {
            let savedStatuses = JSON.parse(localStorage.getItem('requirementStatuses') || '{}');
            if (status) {
                savedStatuses[reqId] = status;
            } else {
                delete savedStatuses[reqId];
            }
            localStorage.setItem('requirementStatuses', JSON.stringify(savedStatuses));
        }

        function loadSavedStatuses() {
            const savedStatuses = JSON.parse(localStorage.getItem('requirementStatuses') || '{}');
            const savedComments = JSON.parse(localStorage.getItem('requirementComments') || '{}');
            
            Object.keys(savedStatuses).forEach(reqId => {
                const selectElement = document.getElementById(`status-${reqId}`);
                if (selectElement) {
                    const status = savedStatuses[reqId];
                    selectElement.value = status;
                    selectElement.classList.add(`status-${status}`);
                }
            });
            
            Object.keys(savedComments).forEach(reqId => {
                const commentElement = document.getElementById(`comment-${reqId}`);
                if (commentElement) {
                    commentElement.value = savedComments[reqId];
                }
            });
            
            updateStatusCounts();
        }

        function saveRequirementComment(reqId, comment) {
            let savedComments = JSON.parse(localStorage.getItem('requirementComments') || '{}');
            if (comment && comment.trim() !== '') {
                savedComments[reqId] = comment;
            } else {
                delete savedComments[reqId];
            }
            localStorage.setItem('requirementComments', JSON.stringify(savedComments));
        }

        function exportStatuses() {
            const savedStatuses = JSON.parse(localStorage.getItem('requirementStatuses') || '{}');
            const savedComments = JSON.parse(localStorage.getItem('requirementComments') || '{}');
            
            // Build export data
            let exportData = 'Requirement ID,Requirement Name,Status,Comments\n';
            
            // Iterate through all requirements in the data structure
            Object.keys(requirementsData).forEach(category => {
                Object.keys(requirementsData[category]).forEach(type => {
                    requirementsData[category][type].forEach(req => {
                        const status = savedStatuses[req.id] || 'Not Set';
                        let statusText = '';
                        if (status === 'needs-revision') statusText = 'Needs Revision';
                        else if (status === 'not-applicable') statusText = 'Not Applicable - remove';
                        else if (status === 'accurate') statusText = 'Accurate';
                        else statusText = status.charAt(0).toUpperCase() + status.slice(1);
                        
                        const comment = savedComments[req.id] || '';
                        exportData += `"${req.id}","${req.requirement.replace(/"/g, '""')}","${statusText}","${comment.replace(/"/g, '""')}"\n`;
                    });
                });
            });
            
            // Create download link
            const blob = new Blob([exportData], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'requirements_review_' + new Date().toISOString().split('T')[0] + '.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function updateStatusCounts() {
            const savedStatuses = JSON.parse(localStorage.getItem('requirementStatuses') || '{}');
            
            let accurateCount = 0;
            let notApplicableCount = 0;
            let revisionCount = 0;
            
            Object.values(savedStatuses).forEach(status => {
                if (status === 'accurate') accurateCount++;
                else if (status === 'not-applicable') notApplicableCount++;
                else if (status === 'needs-revision') revisionCount++;
            });
            
            document.getElementById('accurateCount').textContent = accurateCount;
            document.getElementById('notApplicableCount').textContent = notApplicableCount;
            document.getElementById('revisionCount').textContent = revisionCount;
        }

        function showNotification(message, type = 'success') {
            // Remove any existing notifications
            const existing = document.querySelector('.notification');
            if (existing) {
                existing.remove();
            }

            // Create new notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            // Auto-remove after 3 seconds (unless page is reloading)
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        function clearAllSelections() {
            if (confirm('Are you sure you want to clear all statuses and comments? This cannot be undone.')) {
                localStorage.removeItem('requirementStatuses');
                localStorage.removeItem('requirementComments');
                showNotification('All selections cleared!', 'success');
                setTimeout(() => {
                    location.reload();
                }, 1000);
            }
        }

        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', (e) => {
                currentFilters.search = e.target.value.toLowerCase();
                applyFilters();
            });
        }

        function renderContent() {
            const content = document.getElementById('content');
            content.innerHTML = '';

            Object.keys(requirementsData).forEach(category => {
                const categoryEl = createCategoryElement(category, requirementsData[category]);
                content.appendChild(categoryEl);
            });
        }

        function createCategoryElement(categoryName, types) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'category';
            categoryDiv.dataset.category = categoryName;

            const totalReqs = Object.values(types).flat().length;

            const header = document.createElement('div');
            header.className = 'category-header';
            header.innerHTML = `
                <div class="category-title">
                    ${categoryName}
                    <span class="category-count">${totalReqs} items</span>
                </div>
                <span class="toggle-icon">â–¼</span>
            `;

            const content = document.createElement('div');
            content.className = 'category-content';

            Object.keys(types).forEach(typeName => {
                const typeEl = createTypeElement(typeName, types[typeName]);
                content.appendChild(typeEl);
            });

            header.onclick = () => toggleCategory(header, content);
            categoryDiv.appendChild(header);
            categoryDiv.appendChild(content);

            return categoryDiv;
        }

        function createTypeElement(typeName, requirements) {
            const typeDiv = document.createElement('div');
            typeDiv.className = 'type-section';

            const header = document.createElement('div');
            header.className = 'type-header';
            header.innerHTML = `
                <div class="type-title">
                    ${typeName}
                    <span class="type-count">${requirements.length}</span>
                </div>
                <span class="toggle-icon">â–¼</span>
            `;

            const content = document.createElement('div');
            content.className = 'type-content';

            const reqList = document.createElement('div');
            reqList.className = 'requirements-list';

            requirements.forEach(req => {
                const reqEl = createRequirementElement(req);
                reqList.appendChild(reqEl);
            });

            content.appendChild(reqList);

            header.onclick = () => toggleType(header, content);
            typeDiv.appendChild(header);
            typeDiv.appendChild(content);

            return typeDiv;
        }

        function createRequirementElement(req) {
            const reqDiv = document.createElement('div');
            reqDiv.className = 'requirement-item';
            reqDiv.dataset.requirement = JSON.stringify(req).toLowerCase();
            reqDiv.dataset.reqId = req.id;

            reqDiv.innerHTML = `
                <div class="requirement-header">
                    <span class="requirement-id">${req.id}</span>
                    <div class="requirement-title">${req.requirement}</div>
                </div>
                ${req.details ? `<div class="requirement-details">${req.details}</div>` : ''}
                <div class="requirement-status-selector">
                    <label for="status-${req.id}">Status:</label>
                    <select id="status-${req.id}" class="status-select" onchange="updateRequirementStatus('${req.id}', this.value)">
                        <option value="">Select status...</option>
                        <option value="accurate">Accurate</option>
                        <option value="not-applicable">Not Applicable - remove</option>
                        <option value="needs-revision">Needs Revision</option>
                    </select>
                </div>
                <div class="requirement-comment">
                    <label for="comment-${req.id}">Comments:</label>
                    <textarea id="comment-${req.id}" 
                              placeholder="Add your comments or notes about this requirement..." 
                              onchange="saveRequirementComment('${req.id}', this.value)"
                              onblur="saveRequirementComment('${req.id}', this.value)"></textarea>
                </div>
            `;

            return reqDiv;
        }

        function toggleCategory(header, content) {
            header.classList.toggle('collapsed');
            content.classList.toggle('collapsed');
        }

        function toggleType(header, content) {
            header.classList.toggle('collapsed');
            content.classList.toggle('collapsed');
        }

        function expandAll() {
            document.querySelectorAll('.category-header, .type-header').forEach(header => {
                header.classList.remove('collapsed');
            });
            document.querySelectorAll('.category-content, .type-content').forEach(content => {
                content.classList.remove('collapsed');
            });
        }

        function collapseAll() {
            document.querySelectorAll('.category-header, .type-header').forEach(header => {
                header.classList.add('collapsed');
            });
            document.querySelectorAll('.category-content, .type-content').forEach(content => {
                content.classList.add('collapsed');
            });
        }

        function applyFilters() {
            const categories = document.querySelectorAll('.category');
            let visibleCount = 0;

            categories.forEach(category => {
                const types = category.querySelectorAll('.type-section');
                let categoryHasVisible = false;

                types.forEach(typeSection => {
                    const requirements = typeSection.querySelectorAll('.requirement-item');
                    let typeHasVisible = false;

                    requirements.forEach(req => {
                        const matchesSearch = currentFilters.search === '' || 
                            req.dataset.requirement.includes(currentFilters.search);

                        const isVisible = matchesSearch;

                        req.style.display = isVisible ? 'block' : 'none';
                        
                        if (isVisible) {
                            typeHasVisible = true;
                            visibleCount++;
                        }
                    });

                    typeSection.style.display = typeHasVisible ? 'block' : 'none';
                    categoryHasVisible = categoryHasVisible || typeHasVisible;
                });

                category.style.display = categoryHasVisible ? 'block' : 'none';
            });

            document.getElementById('visibleReqs').textContent = visibleCount;

            if (visibleCount === 0) {
                showNoResults();
            } else {
                hideNoResults();
            }
        }

        function showNoResults() {
            let noResults = document.querySelector('.no-results');
            if (!noResults) {
                noResults = document.createElement('div');
                noResults.className = 'no-results';
                noResults.innerHTML = `
                    <div style="font-size: 4em; margin-bottom: 20px; opacity: 0.3;">ðŸ”</div>
                    <h2>No requirements found</h2>
                    <p>Try adjusting your search</p>
                `;
                document.getElementById('content').appendChild(noResults);
            }
        }

        function hideNoResults() {
            const noResults = document.querySelector('.no-results');
            if (noResults) {
                noResults.remove();
            }
        }

        function updateStats() {
            let totalCount = 0;
            let categoryCount = Object.keys(requirementsData).length;

            Object.values(requirementsData).forEach(types => {
                Object.values(types).forEach(reqs => {
                    totalCount += reqs.length;
                });
            });

            document.getElementById('totalReqs').textContent = totalCount;
            document.getElementById('visibleReqs').textContent = totalCount;
            document.getElementById('categoryCount').textContent = categoryCount;
        }

        // Initialize page on load
        window.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
